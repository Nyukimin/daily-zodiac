<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <base href="{{ base_path }}" />
  <title>{{ page_title }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="min-h-screen bg-zinc-950 text-zinc-50 overflow-x-hidden">
  <!-- 背景レイヤー -->
  <div class="fixed inset-0 -z-10" aria-hidden="true">
    <div class="absolute inset-0 bg-zinc-950"></div>
    <div class="absolute -top-40 -left-40 h-[520px] w-[520px] rounded-full bg-fuchsia-500/10 blur-3xl"></div>
    <div class="absolute -bottom-48 -right-48 h-[620px] w-[620px] rounded-full bg-amber-400/8 blur-3xl"></div>
  </div>

  <main class="mx-auto max-w-5xl px-4 py-4 flex flex-col min-h-screen">
    <!-- 星座切り替えタブ（SNS流入時は即切り替え可能にするため最上部に配置） -->
    <nav class="mb-2 shrink-0" aria-label="星座・全体運">
      <ul class="flex flex-wrap gap-x-1.5 gap-y-0.5 text-[10px] text-zinc-200/80">
        <li><a href="{{ base_href }}" class="hover:text-white transition {% if is_home %}font-semibold text-white{% endif %}">全体運</a></li>
        {% for s, ja in signs %}
        <li><a href="{{ base_href }}{{ s }}/" class="hover:text-white transition {% if not is_home and data.sign == s %}font-semibold text-white{% endif %}">{{ ja }}</a></li>
        {% endfor %}
      </ul>
    </nav>

    <!-- キービジュアル：左に情報・右にイラスト -->
    <section class="w-full rounded-2xl ring-1 ring-white/12 overflow-hidden mb-2 shrink-0" aria-label="キービジュアル">
      <div class="relative flex w-full h-[28vh] min-h-[120px] bg-zinc-900/80">
        <!-- 左：日付・星座・見出し・要約の一覧（背景をグラデーションと一致させる） -->
        <div class="relative z-10 flex flex-col justify-center gap-1 px-4 py-3 min-w-0 flex-1 bg-zinc-900/80">
          <p class="text-[10px] text-zinc-200/90">{{ data.date }}</p>
          <h2 class="text-base font-semibold tracking-tight text-white">{% if is_home %}今日の全体運{% else %}今日の{{ data.sign_ja }}{% endif %}</h2>
          <p class="text-xs text-zinc-200/90 leading-snug mt-0.5">{{ (data.summary[:45] + '…') if data.summary|length > 45 else data.summary }}</p>
        </div>
        <!-- 右：イラスト（右寄せ・軽く拡大）+ グラデーションはイラスト左端から全面になだらかにフェード -->
        <div class="relative flex-1 min-w-0 flex justify-end items-center overflow-hidden">
          <img
            src="./{{ img_src }}"
            alt="{{ data.sign_ja }}の今日の運勢"
            class="relative h-[130%] w-auto max-w-none object-contain object-right object-bottom"
          />
          <!-- イラストエリア全体を覆い、左端から右へなだらかにフェード -->
          <div class="absolute inset-0 pointer-events-none" aria-hidden="true" style="background: linear-gradient(to right, rgb(24 24 27) 0%, rgb(24 24 27 / 0.85) 30%, rgb(24 24 27 / 0.55) 55%, rgb(24 24 27 / 0.25) 78%, transparent 100%);"></div>
        </div>
      </div>
    </section>

    <!-- 広告枠 -->
    <aside class="w-full rounded-xl ring-1 ring-white/12 bg-white/5 backdrop-blur-xl px-2 py-1.5 mb-2 shrink-0" aria-label="スポンサーリンク">
      <p class="text-[10px] text-zinc-200/60 mb-1">スポンサーリンク</p>
      <div class="ad-slot w-full max-w-[300px] h-10 mx-auto rounded-md bg-zinc-950/50 ring-1 ring-white/10 grid place-items-center text-[10px] text-zinc-200/60">
        Ad Slot (300×48)
      </div>
    </aside>

    <!-- 結果コンテンツ -->
    <section class="rounded-2xl ring-1 ring-white/12 bg-white/5 backdrop-blur-xl overflow-hidden flex-1 min-h-0" aria-label="今日の占い結果">
      {% block content %}{% endblock %}
    </section>
  </main>
</body>
</html>
