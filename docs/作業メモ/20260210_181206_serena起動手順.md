# Serena 起動手順

## 概要

- **uvx で起動した Serena MCP サーバー**は、バックグラウンドで起動済みです（ターミナルで `uvx --from git+https://github.com/oraios/serena serena start-mcp-server ...` を実行したプロセス）。
- **Cursor から Serena を使う**には、Cursor の MCP 設定を uvx 用に更新済みです。Cursor を再起動するか、MCP サーバーを再接続すると、Cursor が自動で Serena を起動します。

## 1. 手動で Serena を起動する場合（バックグラウンド）

次のコマンドを **PowerShell または コマンドプロンプト** で実行してください。

```powershell
uvx --from git+https://github.com/oraios/serena serena start-mcp-server --context ide-assistant --project "c:\GenerativeAI\daily-zodiac"
```

- 初回は uvx がパッケージをダウンロード・ビルドするため、数十秒かかることがあります。
- プロジェクトを変えたい場合は `--project` のパスを変更してください。

## 2. Cursor から Serena を使う

- 設定ファイル: `%USERPROFILE%\.cursor\mcp.json`
- 現在の設定では **uvx** で Serena を起動するように変更済みです。
- ローカルの `C:\GenerativeAI\MCP\serena\start_serena.bat` は、`.venv` に `pyvenv.cfg` が存在しないためエラーになっていました。そのため、起動方法を uvx に統一しています。

**Cursor で Serena を有効にする手順:**

1. Cursor を再起動する、または  
2. **Cursor Settings > Features > MCP** で Serena が有効になっていることを確認する  
3. チャットで `@serena` や MCP の Serena ツールを利用する  

## 3. ローカル .venv を使いたい場合（オプション）

`C:\GenerativeAI\MCP\serena\.venv` で「failed to locate pyvenv.cfg」が出る場合は、仮想環境が壊れているか移動されています。

- そのフォルダで **uv** または **python -m venv** で仮想環境を作り直し、  
- `pip install -e .` または `uv sync` で serena を再インストールすると、  
- 従来どおり `start_serena.bat` や `python run_serena.py start-mcp-server` で起動できます。

通常は **uvx を使う方法** のままで問題ありません。

## 4. 参考

- [Serena - Cursor MCP](https://cursormcp.dev/mcp-servers/1080-serena)
- [Serena Documentation - Connecting Your MCP Client](https://oraios.github.io/serena/02-usage/030_clients.html)
